# 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
Nokoroa

### 1.2 背景・目的
旅行が好きなユーザーが、旅先での思い出を共有することに特化したサービスを提供する。

既存SNS(Instagram等)では以下の課題がある:
- 投稿形式が限定されている
- 旅行以外の投稿が混在し、旅行体験だけを探しにくい
- 旅行に特化した既存アプリで満足できるものがない

これらを解決するため、旅行の思い出共有に特化し、地図から投稿を探せるプラットフォームを構築する。

### 1.3 ターゲットユーザー
- 旅行好きな20〜40代
- 旅行の思い出を記録・共有したい人
- 他人の旅行体験を参考にしたい人

---

## 2. 機能要件

### 2.1 ユーザー管理

| ID | 機能 | 詳細 | 優先度 |
|----|------|------|--------|
| U-001 | ユーザー登録 | メールアドレス、パスワード、名前で登録 | 高 |
| U-002 | ログイン | メール/パスワード認証 | 高 |
| U-003 | Google認証 | Google OAuth 2.0によるログイン | 中 |
| U-004 | プロフィール編集 | 名前、自己紹介、アバター画像の変更 | 中 |
| U-005 | パスワード変更 | ログイン中のユーザーがパスワードを変更 | 低 |

### 2.2 投稿機能

| ID | 機能 | 詳細 | 優先度 |
|----|------|------|--------|
| P-001 | 投稿作成 | タイトル、本文、画像、位置情報、タグを設定して投稿 | 高 |
| P-002 | 投稿編集 | 自分の投稿を編集 | 高 |
| P-003 | 投稿削除 | 自分の投稿を削除 | 高 |
| P-004 | 投稿一覧表示 | 公開投稿を一覧表示(ページネーション) | 高 |
| P-005 | 投稿詳細表示 | 投稿の詳細情報を表示 | 高 |
| P-006 | 画像アップロード | S3への画像アップロード(5MB制限) | 高 |
| P-007 | 公開/非公開設定 | 投稿の公開状態を切り替え | 中 |

### 2.3 検索機能

| ID | 機能 | 詳細 | 優先度 |
|----|------|------|--------|
| S-001 | キーワード検索 | タイトル、本文、タグで検索 | 高 |
| S-002 | タグ検索 | タグによる絞り込み | 高 |
| S-003 | 地図検索 | Google Mapsで位置情報から投稿を探す | 中 |
| S-004 | 位置情報検索 | 緯度経度の範囲指定で検索 | 中 |

### 2.4 ソーシャル機能

| ID | 機能 | 詳細 | 優先度 |
|----|------|------|--------|
| F-001 | フォロー | 他ユーザーをフォロー | 中 |
| F-002 | アンフォロー | フォロー解除 | 中 |
| F-003 | フォロワー一覧 | フォロワーの一覧表示 | 中 |
| F-004 | フォロー中一覧 | フォロー中ユーザーの一覧表示 | 中 |
| B-001 | ブックマーク追加 | 投稿をブックマーク | 中 |
| B-002 | ブックマーク削除 | ブックマーク解除 | 中 |
| B-003 | ブックマーク一覧 | ブックマークした投稿の一覧表示 | 中 |

---

## 3. 非機能要件

### 3.1 性能要件

| 項目 | 要件 |
|------|------|
| レスポンス時間 | API応答時間 500ms以内 |
| 同時接続数 | 1000ユーザー同時アクセスに対応 |
| 画像アップロード | 5MB以下、jpg/jpeg/png/gif/webp形式 |

### 3.2 可用性要件

| 項目 | 要件 |
|------|------|
| 稼働率 | 99.5%以上 |
| バックアップ | RDS自動バックアップ(7日間保持) |
| 障害復旧 | 30分以内の復旧目標 |

### 3.3 セキュリティ要件

| 項目 | 要件 |
|------|------|
| 認証 | JWT(有効期限1日) |
| パスワード | bcryptによるハッシュ化 |
| 通信 | HTTPS(TLS 1.2以上) |
| CORS | フロントエンドドメインのみ許可 |

### 3.4 運用要件

| 項目 | 要件 |
|------|------|
| ログ | CloudWatch Logsで30日間保持 |
| デプロイ | GitHub Actions経由の自動デプロイ |
| 環境 | 本番環境(AWS ECS Fargate) |

---

## 4. 制約条件

- フロントエンドはNext.js(App Router)を使用
- バックエンドはNestJSを使用
- データベースはPostgreSQLを使用
- インフラはAWS上に構築
- 地図機能はGoogle Maps APIを使用

---

## 5. スコープ外

- コメント機能
- いいね機能
- 通知機能
- メッセージ機能
- 管理画面
- 多言語対応
